#!/usr/bin/python

import re

curl_cmd = """curl 'https://www.carvana.com/api/v1/inventory' -H 'origin: https://www.carvana.com' -H 'accept-encoding: gzip, deflate, br' -H 'accept-language: en-US,en;q=0.9' -H 'x-requested-with: XMLHttpRequest' -H 'cookie: visid_incap_805168=G5zlfoCBSj20xcWkMZaiYu1Rn1oAAAAAQUIPAAAAAAAs0K3hbKlN/gPEQSalcQ5L; optimizelyEndUserId=oeu1520390637324r0.6227247418680086; optimizelySegments=%7B%221814700283%22%3A%22direct%22%2C%221814840443%22%3A%22none%22%2C%221822780288%22%3A%22gc%22%2C%221823670326%22%3A%22false%22%7D; ai_user=L8Tq9|2018-03-07T02:43:58.090Z; _mhbktsv=dbm; CVCurrentState=NY; _ga=GA1.2.1480107599.1520390639; _mkto_trk=id:976-AQX-796&token:_mch-carvana.com-1520390639150-25717; _bcvm_vrid_1810077198891002839=745372537116579922TF5A0145EFAD02B38BDE97FB2352655FF0FDF3908FA01E957AD58DB038A22BC1BA2040551D25C2252B1F107A48887EA8FAF3E674E43CFCCD2D6FEB2C087785ABE; CVCurrentCity=Brooklyn; HasGeoLocationAlready=True; CVMostPopularVehicleSearchSortType=1; CVCurrentZip=11231; km_ai=CFtX2HQrvRaYVlatsDMRjdeEZHo%3D; km_lv=x; optimizelyBuckets=%7B%229420831488%22%3A%229413581757%22%2C%2210202680188%22%3A%2210195321152%22%2C%2210199393029%22%3A%2210194892840%22%2C%2210366117709%22%3A%2210370365662%22%2C%229753802194%22%3A%229734433521%22%2C%2210195003663%22%3A%2210234520241%22%2C%229666782365%22%3A%229730771281%22%7D; _gid=GA1.2.1460526608.1520640208; wurfljs_ch_65e232ed43477b2f5cb4413023548fce=1520640358823; wurfljs_ch_e6b04c8770df66c68b46b9485d45dc74=1520640889213; wurfljs_ch_35759c89105299d349bee26c283a5360=1520644177196; ASP.NET_SessionId=v4bmykth53quay1o0gkmb0wr; kmc_ref=Direct; kmc_sv=Visited; CVIsDirectDelivery=False; carvanaOnDemandHasBeenWatched=true; LeadReferralSourceKey=SortBy; LeadReferralSourceUniqueId=NewestInventory; CVActivePartnerId=1; VDPSpinnerTutorialSeen=true; PartnerVanityUrlName=notused; km_uq=; kenshoo_crosswise_id_sync=004f6858-b97b-a20a-513a-6b4a12cb170d; incap_ses_139_805168=tTyqay1dfgkyoUgfDNjtAQExpVoAAAAAUBVF569BH0TE4U6V1bLEpw==; _gat_UA-36199927-1=1; ai_session=izay2|1520775426741.4|1520775426741.4; kvcd=1520775426801; km_vs=1; fs_uid=fullstory.com`6SG8F`6471214949203968:5744199185989632; _bcvm_vid_1810077198891002839=745376384815472199T81AF4C83F42ACC8A662CD733D2722E5AAE7B6E5D6821CDB54622706B06E18EAD3C6269ED64BCCEB971D32F60EED4A11A2E49C438C7F5D59D475B66ECEC4965F2; optimizelyPendingLogEvents=%5B%5D' -H 'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36' -H 'x-ms-request-root-id: F6Ddj' -H 'content-type: application/json;charset=UTF-8' -H 'accept: application/json, text/plain, */*' -H 'referer: https://www.carvana.com/search?SortBy=NewestInventory&page=468' -H 'authority: www.carvana.com' -H 'x-ms-request-id: 9o236' --data-binary '{"sortBy":"NewestInventory","pagination":{"page":469,"pageSize":24},"filters":{},"searchContext":{"mostPopularSortOption":1,"discounts":[],"geolocationInfo":{"location":{"zip5":"11231","state":"NY","city":"Brooklyn","localLocationId":56},"deliveryContext":{"deliveryInfoByLocationId":{"1":{"earliestDeliveryDate":"2018-03-20T20:00:00Z","earliestDaysToDelivery":10,"earliestDayOfDelivery":"3/20/2018","fee":0,"isDirectDelivery":false},"6":{"earliestDeliveryDate":"2018-03-22T14:00:00Z","earliestDaysToDelivery":12,"earliestDayOfDelivery":"3/22/2018","fee":0,"isDirectDelivery":false},"13":{"earliestDeliveryDate":"2018-03-20T20:00:00Z","earliestDaysToDelivery":10,"earliestDayOfDelivery":"3/20/2018","fee":0,"isDirectDelivery":false},"43":{"earliestDeliveryDate":"2018-03-28T14:00:00Z","earliestDaysToDelivery":18,"earliestDayOfDelivery":"3/28/2018","fee":0,"isDirectDelivery":false}},"pickUpInfoByLocationId":{"1":{"pickupLocation":{"zip5":"11231","state":"NC","city":"Raleigh"},"milesToPickupLocation":458,"earliestPickupDate":"2018-03-13T15:45:00Z","earliestDayOfPickup":"Tuesday","earliestDaysToPickup":3,"fee":0},"6":{"pickupLocation":{"zip5":"11231","state":"NC","city":"Raleigh"},"milesToPickupLocation":458,"earliestPickupDate":"2018-03-21T15:45:00Z","earliestDayOfPickup":"3/21/2018","earliestDaysToPickup":11,"fee":0},"13":{"pickupLocation":{"zip5":"11231","state":"NC","city":"Raleigh"},"milesToPickupLocation":458,"earliestPickupDate":"2018-03-15T20:45:00Z","earliestDayOfPickup":"Thursday","earliestDaysToPickup":5,"fee":0},"43":{"pickupLocation":{"zip5":"11231","state":"NC","city":"Raleigh"},"milesToPickupLocation":458,"earliestPickupDate":"2018-03-28T13:00:00Z","earliestDayOfPickup":"3/28/2018","earliestDaysToPickup":17,"fee":0}},"earliestAcquistionInfoByLocationId":{"1":{"acquisitionType":"Delivery","earliestDayOfAcquisition":"3/20/2018","earliestDateOfAcquisition":"2018-03-20T20:00:00Z","earliestDaysToAcquistion":10,"isWithinDisplayThreshold":false,"isDirectDelivery":false},"6":{"acquisitionType":"Delivery","earliestDayOfAcquisition":"3/22/2018","earliestDateOfAcquisition":"2018-03-22T14:00:00Z","earliestDaysToAcquistion":12,"isWithinDisplayThreshold":false,"isDirectDelivery":false},"13":{"acquisitionType":"Delivery","earliestDayOfAcquisition":"3/20/2018","earliestDateOfAcquisition":"2018-03-20T20:00:00Z","earliestDaysToAcquistion":10,"isWithinDisplayThreshold":false,"isDirectDelivery":false},"43":{"acquisitionType":"Delivery","earliestDayOfAcquisition":"3/28/2018","earliestDateOfAcquisition":"2018-03-28T14:00:00Z","earliestDaysToAcquistion":18,"isWithinDisplayThreshold":false,"isDirectDelivery":false}},"deliveryInfoToDisplay":{"minDeliveryFee":0,"maxDeliveryFee":0,"earliestDeliveryDate":"2018-03-20T20:00:00Z","earliestDaysToDelivery":10,"fee":0,"isDirectDelivery":false},"pickUpInfoToDisplay":{"pickupLocation":{"zip5":"11231","state":"NC","city":"Raleigh"},"milesToPickupLocation":458,"earliestPickupDate":"2018-03-13T15:45:00Z","earliestDayOfPickup":"Tuesday","earliestDaysToPickup":3,"fee":0}}},"visitContext":{"sessionId":"6dcb5b9c-e0ee-4fc7-92c0-c2a0b339c893","kissMetricsId":"CFtX2HQrvRaYVlatsDMRjdeEZHo%3D","isMobileDevice":false,"deviceName":"Unknown","screenResolution":"640x480","browser":"Chrome","clientIp":"198.143.38.89","activeExperiments":[{"experimentId":"9753802194","variationId":"9734433521"}]},"timestamp":1520776327551},"financeContext":null}' --compressed"""

#replace  {"page":469,"pageSize":24} with  {"page":"""+str(x)+""","pageSize":100}

test = """spam and egg {"page":469,"pageSize":24}"""

print "#/bin/bash\nset -x\n"

for x in range(1,2):
    line = re.sub( r"""(?=.*{"page":)\d+""", str(x), test )
    line = re.sub( r""""(?=pageSize":)\d+""", str(100), line )
    print line

    #print """curl 'https://www.carvana.com/api/v1/inventory' -H 'origin: https://www.carvana.com' -H 'accept-encoding: gzip, deflate, br' -H 'accept-language: en-US,en;q=0.9' -H 'x-requested-with: XMLHttpRequest' -H 'cookie: visid_incap_805168=G5zlfoCBSj20xcWkMZaiYu1Rn1oAAAAAQUIPAAAAAAAs0K3hbKlN/gPEQSalcQ5L; optimizelyEndUserId=oeu1520390637324r0.6227247418680086; optimizelySegments=%7B%221814700283%22%3A%22direct%22%2C%221814840443%22%3A%22none%22%2C%221822780288%22%3A%22gc%22%2C%221823670326%22%3A%22false%22%7D; ai_user=L8Tq9|2018-03-07T02:43:58.090Z; _mhbktsv=dbm; CVCurrentState=NY; _ga=GA1.2.1480107599.1520390639; _mkto_trk=id:976-AQX-796&token:_mch-carvana.com-1520390639150-25717; _bcvm_vrid_1810077198891002839=745372537116579922TF5A0145EFAD02B38BDE97FB2352655FF0FDF3908FA01E957AD58DB038A22BC1BA2040551D25C2252B1F107A48887EA8FAF3E674E43CFCCD2D6FEB2C087785ABE; CVCurrentCity=Brooklyn; HasGeoLocationAlready=True; CVMostPopularVehicleSearchSortType=1; CVCurrentZip=11231; km_ai=CFtX2HQrvRaYVlatsDMRjdeEZHo%3D; km_lv=x; optimizelyBuckets=%7B%229420831488%22%3A%229413581757%22%2C%2210202680188%22%3A%2210195321152%22%2C%2210199393029%22%3A%2210194892840%22%2C%2210366117709%22%3A%2210370365662%22%2C%229753802194%22%3A%229734433521%22%2C%2210195003663%22%3A%2210234520241%22%2C%229666782365%22%3A%229730771281%22%7D; _gid=GA1.2.1460526608.1520640208; wurfljs_ch_65e232ed43477b2f5cb4413023548fce=1520640358823; wurfljs_ch_e6b04c8770df66c68b46b9485d45dc74=1520640889213; wurfljs_ch_35759c89105299d349bee26c283a5360=1520644177196; ASP.NET_SessionId=v4bmykth53quay1o0gkmb0wr; kmc_ref=Direct; kmc_sv=Visited; CVIsDirectDelivery=False; carvanaOnDemandHasBeenWatched=true; LeadReferralSourceKey=SortBy; LeadReferralSourceUniqueId=NewestInventory; CVHasShownDiscountModal=true; CVActivePartnerId=1; VDPSpinnerTutorialSeen=true; PartnerVanityUrlName=notused; km_uq=; incap_ses_139_805168=iIMQDrQH7mkfBNIeDNjtAZ2BpFoAAAAAAs//TYUJ6q2CSJ49ubpZ9Q==; kvcd=1520730527236; km_vs=1; kenshoo_crosswise_id_sync=004f6858-b97b-a20a-513a-6b4a12cb170d; _bcvm_vid_1810077198891002839=745375936027552220TCF25B4D75C34A8FDF74C2882CC133F98AD23FE5D405285F48AF1CBC4726AD125C994E9473476CF4263A6C0B8A562026B66C93A261ABA72DB3A00781DE1F62312; fs_uid=fullstory.com`6SG8F`6471214949203968:6330073393135616; ai_session=jMhlG|1520730526761.7|1520730591616.3' -H 'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36' -H 'x-ms-request-root-id: 93GJv' -H 'content-type: application/json;charset=UTF-8' -H 'accept: application/json, text/plain, */*' -H 'referer: https://www.carvana.com/search?SortBy=NewestInventory&page=1' -H 'authority: www.carvana.com' -H 'x-ms-request-id: +KE0p' --data-binary '{"sortBy":"NewestInventory","pagination":{"page":"""+str(x)+""","pageSize":100},"filters":{},"searchContext":{"mostPopularSortOption":1,"discounts":[],"geolocationInfo":{"location":{"zip5":"11231","state":"NY","city":"Brooklyn","localLocationId":56},"deliveryContext":{"deliveryInfoByLocationId":{"1":{"earliestDeliveryDate":"2018-03-20T20:00:00Z","earliestDaysToDelivery":10,"earliestDayOfDelivery":"3/20/2018","fee":0,"isDirectDelivery":false},"6":{"earliestDeliveryDate":"2018-03-21T23:00:00Z","earliestDaysToDelivery":11,"earliestDayOfDelivery":"3/21/2018","fee":0,"isDirectDelivery":false},"13":{"earliestDeliveryDate":"2018-03-20T20:00:00Z","earliestDaysToDelivery":10,"earliestDayOfDelivery":"3/20/2018","fee":0,"isDirectDelivery":false},"43":{"earliestDeliveryDate":"2018-03-26T14:00:00Z","earliestDaysToDelivery":16,"earliestDayOfDelivery":"3/26/2018","fee":0,"isDirectDelivery":false}},"pickUpInfoByLocationId":{"1":{"pickupLocation":{"zip5":"11231","state":"NC","city":"Raleigh"},"milesToPickupLocation":458,"earliestPickupDate":"2018-03-13T14:15:00Z","earliestDayOfPickup":"Tuesday","earliestDaysToPickup":3,"fee":0},"6":{"pickupLocation":{"zip5":"11231","state":"NC","city":"Raleigh"},"milesToPickupLocation":458,"earliestPickupDate":"2018-03-21T14:15:00Z","earliestDayOfPickup":"3/21/2018","earliestDaysToPickup":11,"fee":0},"13":{"pickupLocation":{"zip5":"11231","state":"NC","city":"Raleigh"},"milesToPickupLocation":458,"earliestPickupDate":"2018-03-13T20:30:00Z","earliestDayOfPickup":"Tuesday","earliestDaysToPickup":3,"fee":0},"43":{"pickupLocation":{"zip5":"11231","state":"NC","city":"Raleigh"},"milesToPickupLocation":458,"earliestPickupDate":"2018-03-25T13:00:00Z","earliestDayOfPickup":"3/25/2018","earliestDaysToPickup":15,"fee":0}},"earliestAcquistionInfoByLocationId":{"1":{"acquisitionType":"Delivery","earliestDayOfAcquisition":"3/20/2018","earliestDateOfAcquisition":"2018-03-20T20:00:00Z","earliestDaysToAcquistion":10,"isWithinDisplayThreshold":false,"isDirectDelivery":false},"6":{"acquisitionType":"Delivery","earliestDayOfAcquisition":"3/21/2018","earliestDateOfAcquisition":"2018-03-21T23:00:00Z","earliestDaysToAcquistion":11,"isWithinDisplayThreshold":false,"isDirectDelivery":false},"13":{"acquisitionType":"Delivery","earliestDayOfAcquisition":"3/20/2018","earliestDateOfAcquisition":"2018-03-20T20:00:00Z","earliestDaysToAcquistion":10,"isWithinDisplayThreshold":false,"isDirectDelivery":false},"43":{"acquisitionType":"Delivery","earliestDayOfAcquisition":"3/26/2018","earliestDateOfAcquisition":"2018-03-26T14:00:00Z","earliestDaysToAcquistion":16,"isWithinDisplayThreshold":false,"isDirectDelivery":false}},"deliveryInfoToDisplay":{"minDeliveryFee":0,"maxDeliveryFee":0,"earliestDeliveryDate":"2018-03-20T20:00:00Z","earliestDaysToDelivery":10,"fee":0,"isDirectDelivery":false},"pickUpInfoToDisplay":{"pickupLocation":{"zip5":"11231","state":"NC","city":"Raleigh"},"milesToPickupLocation":458,"earliestPickupDate":"2018-03-13T20:30:00Z","earliestDayOfPickup":"Tuesday","earliestDaysToPickup":3,"fee":0}}},"visitContext":{"sessionId":"401fa287-f15a-482d-b5bb-194609470d8d","kissMetricsId":"CFtX2HQrvRaYVlatsDMRjdeEZHo%3D","isMobileDevice":false,"deviceName":"Unknown","screenResolution":"640x480","browser":"Chrome","clientIp":"198.143.38.89","activeExperiments":[]},"timestamp":1520731426850},"financeContext":null,"pricingContext":null}' --compressed > carvana"""+str(x)+".json"
    
    
    
    